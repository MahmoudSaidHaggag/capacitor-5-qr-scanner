import Foundation
import Capacitor
import AVFoundation

/**
 * Please read the Capacitor iOS Plugin Development Guide
 * here: https://capacitorjs.com/docs/plugins/ios
 */
@objc(QrScanner)
public class QrScanner: CAPPlugin {
    
    var backCall:CAPPluginCall?
    public override func load() {
        
    }
    @objc func scanQrCode(_ call: CAPPluginCall) {
        print("------")
        backCall = call;
        
        DispatchQueue.main.async {
            print("___________")
            let qrVc = QRController();
//            qrVc.scanResponse = {
//                url in
//                call.resolve([
//                  "result": url
//                ])
//            }
            qrVc.modalPresentationStyle = .fullScreen;
            self.bridge.viewController.present(qrVc, animated: true, completion: nil)
       
            print("++++++")
        }
        
    }
}
