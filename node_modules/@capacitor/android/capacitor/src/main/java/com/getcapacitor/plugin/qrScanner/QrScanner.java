package com.getcapacitor.plugin.qrScanner;

import android.content.Intent;

import com.getcapacitor.NativePlugin;
import com.getcapacitor.Plugin;
import com.getcapacitor.PluginCall;
import com.getcapacitor.PluginMethod;

@NativePlugin
public class QrScanner extends Plugin {
    private static final int REQUEST_CODE_SCAN = 2;
    private String result = "";
    private PluginCall call;

    @PluginMethod
    public void scanQrCode(PluginCall call) {
        this.call = call;
        /*JSObject ret = new JSObject();
        ret.put("result", "https://www.baidu.com");
        call.success(ret);
*/

        Intent scanIntent = new Intent(getContext(), CodeScannerActivity.class);
        startActivityForResult(call, scanIntent, REQUEST_CODE_SCAN);
    }


    /*@Override
    protected void handleOnActivityResult(int requestCode, int resultCode, Intent data) {
        super.handleOnActivityResult(requestCode, resultCode, data);
        switch (requestCode) {
            //扫码获取到的UUID
            case REQUEST_CODE_SCAN:
                if (resultCode == -1) {
                    result = data.getStringExtra("SCAN_RESULT");
                    JSObject ret = new JSObject();
                    ret.put("result", result);
                    call.success(ret);
                }
                break;
        }
    }*/
}
